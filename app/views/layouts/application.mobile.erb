<!DOCTYPE html>
<html lang="en">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    
    <%= render :partial => 'layouts/shared/html_head' %>
    <%= stylesheet_link_tag "mobile", :media => "all" %>
    <%= javascript_include_tag "mobile" %>    
  </head>

  <body>
    
    <%# ajax loading spinner %>
    <div id="loader"></div>  
  
    <div data-role="page" id='main_page'> 
      
      <div data-role="header" data-id='header' data-fullscreen='true' data-theme='d'>
        
        <div class='center_wrap'>
          <div class='left ml-m'><%= link_to 'back', back_path, :'data-role' => 'button', :'data-icon' => 'back', :'data-iconpos' => 'notext', :'data-shadow' => 'false' %></div>
          <div class='center'><%= link_to content_tag(:div, '', :id => 'logo', :class => 'center'), root_path %></div>
          <div class='right mr-m'><div data-role='button' data-icon='bars' data-iconpos='notext' data-shadow='false'> menu </div> </div>
        </div>
        
      </div>
      
      <div id='content' data-role="content">
        <% if flash[:notice] %> 
          <%= render :partial => 'layouts/mobile/flash', :locals => { :flash_type => 'notice', :flash_message => flash[:notice] } %>
        <% elsif flash[:alert] %>
          <%= render :partial => 'layouts/mobile/flash', :locals => { :flash_type => 'alert', :flash_message => flash[:alert] } %>
        <% elsif flash[:error] %>
          <%= render :partial => 'layouts/mobile/flash', :locals => { :flash_type => 'error', :flash_message => flash[:error] } %>
        <% elsif flash[:warning] %>
          <%= render :partial => 'layouts/mobile/flash', :locals => { :flash_type => 'warning', :flash_message => flash[:warning] } %>
        <% end %>
        
        <script type="text/javascript" language="JavaScript">
          if ($('#flash').html()){
            $("#main_page").on("pageshow", function(event) {
              $("#flash").popup("open", { history: false });
            });
          }
        </script>

        <%= yield %>

      </div>

    </div>

  </body>

</html>
